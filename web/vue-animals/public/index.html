<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">

    <title>vue-animals</title>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but vue-animals doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <input id="app">
      <div id="images"></div>
      <input type="text" id="newanimal" placeholder="What animal is it?"></input>
      <input type="text" id="newdescription" placeholder="Describe the animal"></input>
      <input type="text" id="newurl" placeholder="Add the photo's url"></input>
    <button id="addphoto" type="button" onclick="addPhoto()">Add a cute animal photo!</button>

    </div>

    <script>



      function addPhoto(){
        console.log("In addPhoto");
        let linkki = document.getElementById("newurl").value;
        let animal = document.getElementById("newanimal").value;
        let descr = document.getElementById("newdescription").value;

        let data = {Elain: animal, Kuvaus: descr, Linkki: linkki};
        let json =JSON.stringify(data);

        var xmlhttp = new XMLHttpRequest();
        console.log("after xmlhttp");

        xmlhttp.onreadystatechange = function() {
          console.log("in function");
          if (data == 0) { // fix this and support empty field
            return;
          } else {
            if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
              console.log("Responsetext: " + xmlhttp.responseText);
              console.log("does this work");
            }
            console.log("before open");
            xmlhttp.open("POST", "http://localhost:8081/postphoto/", true);
            //xmlhttp.open("POST", "http://localhost:8081/postphoto/" +descr+ "/" +animal+ "/" +linkki, true);
            //xmlhttp.open("GET", "http://localhost:8081/api/events?start=" + startdate+"&end="+enddate, true);
            xmlhttp.send(json);
            console.log("data sent");
          }
        }
      };
    </script>
    <!-- built files will be auto injected -->
  </body>
</html>
